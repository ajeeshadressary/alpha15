"use strict";

var reducer = require("../reducers/pages");

var _require = require("../actions"),
    actions = _require.actions;

describe(`Add pages`, function () {
  it(`allows you to add pages`, function () {
    var action = actions.upsertPage({
      path: `/hi/`,
      component: `/whatever/index.js`
    });
    var state = reducer(undefined, action);
    expect(action).toMatchSnapshot();
    expect(state).toMatchSnapshot();
  });

  it(`allows you to add pages with context`, function () {
    var action = actions.upsertPage({
      path: `/hi/`,
      component: `/whatever/index.js`,
      context: {
        id: 123
      }
    });
    var state = reducer(undefined, action);
    expect(action).toMatchSnapshot();
    expect(state).toMatchSnapshot();
  });

  it(`allows you to add multiple pages`, function () {
    var action = actions.upsertPage({
      path: `/hi/`,
      component: `/whatever/index.js`
    });
    var action2 = actions.upsertPage({
      path: `/hi/pizza/`,
      component: `/whatever/index.js`
    });
    var state = reducer(undefined, action);
    state = reducer(state, action2);
    expect(state).toMatchSnapshot();
    expect(state.length).toEqual(2);
  });

  it(`allows you to update existing pages (based on path)`, function () {
    var action = actions.upsertPage({
      path: `/hi/`,
      component: `/whatever/index.js`
    });

    // Change the component
    var action2 = actions.upsertPage({
      path: `/hi/`,
      component: `/whatever2/index.js`
    });

    var state = reducer(undefined, action);
    state = reducer(state, action2);
    expect(state).toMatchSnapshot();
    expect(state.length).toEqual(1);
  });
});