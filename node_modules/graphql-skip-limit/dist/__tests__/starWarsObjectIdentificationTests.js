'use strict';

var _regenerator = require('babel-runtime/regenerator');

var _regenerator2 = _interopRequireDefault(_regenerator);

var _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _chai = require('chai');

var _mocha = require('mocha');

var _starWarsSchema = require('./starWarsSchema.js');

var _graphql = require('graphql');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// 80+ char lines are useful in describe/it, so ignore in this file.
/* eslint-disable max-len */

/**
 *  Copyright (c) 2015, Facebook, Inc.
 *  All rights reserved.
 *
 *  This source code is licensed under the BSD-style license found in the
 *  LICENSE file in the root directory of this source tree. An additional grant
 *  of patent rights can be found in the PATENTS file in the same directory.
 */

(0, _mocha.describe)('Star Wars object identification', function () {
  (0, _mocha.it)('fetches the ID and name of the rebels', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee() {
    var query, expected, result;
    return _regenerator2.default.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            query = `
      query RebelsQuery {
        rebels {
          id
          name
        }
      }
    `;
            expected = {
              rebels: {
                id: 'RmFjdGlvbjox',
                name: 'Alliance to Restore the Republic'
              }
            };
            _context.next = 4;
            return (0, _graphql.graphql)(_starWarsSchema.StarWarsSchema, query);

          case 4:
            result = _context.sent;

            (0, _chai.expect)(result).to.deep.equal({ data: expected });

          case 6:
          case 'end':
            return _context.stop();
        }
      }
    }, _callee, undefined);
  })));

  (0, _mocha.it)('refetches the rebels', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2() {
    var query, expected, result;
    return _regenerator2.default.wrap(function _callee2$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            query = `
      query RebelsRefetchQuery {
        node(id: "RmFjdGlvbjox") {
          id
          ... on Faction {
            name
          }
        }
      }
    `;
            expected = {
              node: {
                id: 'RmFjdGlvbjox',
                name: 'Alliance to Restore the Republic'
              }
            };
            _context2.next = 4;
            return (0, _graphql.graphql)(_starWarsSchema.StarWarsSchema, query);

          case 4:
            result = _context2.sent;

            (0, _chai.expect)(result).to.deep.equal({ data: expected });

          case 6:
          case 'end':
            return _context2.stop();
        }
      }
    }, _callee2, undefined);
  })));

  (0, _mocha.it)('fetches the ID and name of the empire', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3() {
    var query, expected, result;
    return _regenerator2.default.wrap(function _callee3$(_context3) {
      while (1) {
        switch (_context3.prev = _context3.next) {
          case 0:
            query = `
      query EmpireQuery {
        empire {
          id
          name
        }
      }
    `;
            expected = {
              empire: {
                id: 'RmFjdGlvbjoy',
                name: 'Galactic Empire'
              }
            };
            _context3.next = 4;
            return (0, _graphql.graphql)(_starWarsSchema.StarWarsSchema, query);

          case 4:
            result = _context3.sent;

            (0, _chai.expect)(result).to.deep.equal({ data: expected });

          case 6:
          case 'end':
            return _context3.stop();
        }
      }
    }, _callee3, undefined);
  })));

  (0, _mocha.it)('refetches the empire', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee4() {
    var query, expected, result;
    return _regenerator2.default.wrap(function _callee4$(_context4) {
      while (1) {
        switch (_context4.prev = _context4.next) {
          case 0:
            query = `
      query EmpireRefetchQuery {
        node(id: "RmFjdGlvbjoy") {
          id
          ... on Faction {
            name
          }
        }
      }
    `;
            expected = {
              node: {
                id: 'RmFjdGlvbjoy',
                name: 'Galactic Empire'
              }
            };
            _context4.next = 4;
            return (0, _graphql.graphql)(_starWarsSchema.StarWarsSchema, query);

          case 4:
            result = _context4.sent;

            (0, _chai.expect)(result).to.deep.equal({ data: expected });

          case 6:
          case 'end':
            return _context4.stop();
        }
      }
    }, _callee4, undefined);
  })));

  (0, _mocha.it)('refetches the X-Wing', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee5() {
    var query, expected, result;
    return _regenerator2.default.wrap(function _callee5$(_context5) {
      while (1) {
        switch (_context5.prev = _context5.next) {
          case 0:
            query = `
      query XWingRefetchQuery {
        node(id: "U2hpcDox") {
          id
          ... on Ship {
            name
          }
        }
      }
    `;
            expected = {
              node: {
                id: 'U2hpcDox',
                name: 'X-Wing'
              }
            };
            _context5.next = 4;
            return (0, _graphql.graphql)(_starWarsSchema.StarWarsSchema, query);

          case 4:
            result = _context5.sent;

            (0, _chai.expect)(result).to.deep.equal({ data: expected });

          case 6:
          case 'end':
            return _context5.stop();
        }
      }
    }, _callee5, undefined);
  })));
});